{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Redirect}from\"react-router-dom\";import{Button,Form,Container,Row}from\"react-bootstrap\";import{FormGroup,FormControl,FormLabel}from\"react-bootstrap\";import\"./Login.css\";import urlAddress from\"../../ip.json\";var url=\"http://\"+urlAddress.ip+\":8080/api/\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={id:\"\",username:\"\",password:\"\",account:\"\"};return _this;}_createClass(Login,[{key:\"handleClick\",value:function handleClick(event){var _this2=this;console.log(this.state);var requestOptions={method:\"POST\",headers:{'Accept':\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({id:this.state.id,username:this.state.username,password:this.state.password})};if(this.state.account===\"\"){alert(\"Please Select Account Type\");}else if(this.state.account===\"customer\"){fetch(url+\"users/login\",requestOptions).then(function(response){if(response.status===200){response.json().then(function(data){//console.log(data.token);\nwindow.sessionStorage.setItem(\"token\",data.token);window.sessionStorage.setItem(\"loggedIn\",true);window.sessionStorage.setItem(\"email\",_this2.state.username);var Cryptr=require(\"cryptr\");var cryptr=new Cryptr(\"keyword\");var encryptedString=cryptr.encrypt(_this2.state.password);window.sessionStorage.setItem(\"encrypted\",encryptedString);var encryptedId=cryptr.encrypt(_this2.state.id);window.sessionStorage.setItem(\"id\",encryptedId);_this2.props.history.push(\"/UserAppo\");window.location.reload(true);//return <Redirect to='/UserAppo' />\n});}else{alert(\"Invalid Username or Password\");}}).catch(function(error){alert(\"Error contacting server\");});}else if(this.state.account===\"business\"){fetch(url+\"businessOwners/login\",requestOptions).then(function(response){//console.log(response.status);\nif(response.status===200){response.json().then(function(data){console.log(\"data: \"+data.token);window.sessionStorage.setItem(\"token\",data.token);window.sessionStorage.setItem(\"business\",true);window.sessionStorage.setItem(\"email\",_this2.state.username);var Cryptr=require(\"cryptr\");var cryptr=new Cryptr(\"keyword\");var encryptedString=cryptr.encrypt(_this2.state.password);window.sessionStorage.setItem(\"encrypted\",encryptedString);_this2.props.history.push(\"/BusinessServices\");window.location.reload(true);});}else{alert(\"Invalid Username or Password\");}}).catch(function(error){alert(\"Error contacting server\");});}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{className:\"login-form\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Login\"),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\",className:\"txtb\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter email\",onChange:function onChange(event){return _this3.setState({username:event.target.value});}}),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted\"})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicPassword\",className:\"txtb\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:function onChange(event){return _this3.setState({password:event.target.value});}})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Row,{className:\"acc-type\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Account:\"),/*#__PURE__*/React.createElement(Form.Check,{className:\"acc-type\",type:\"radio\",label:\"Customer\",name:\"accountType\",value:\"customer\",onChange:function onChange(event){return _this3.setState({account:event.target.value});}}),/*#__PURE__*/React.createElement(Form.Check,{className:\"acc-type\",type:\"radio\",label:\"Business\",name:\"accountType\",value:\"business\",onChange:function onChange(event){return _this3.setState({account:event.target.value});}}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(event){return _this3.handleClick(event);},className:\"logbtn\"},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{class:\"bottom-text\"},\"Don't have account?\",/*#__PURE__*/React.createElement(\"a\",{href:\"/register\",style:{textDecoration:\"none\"}},\" \",\"Sign up\",\" \"))))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["C:/Users/Amrah/IdeaProjects/Appointment booking API project/majorproject-5-wed-16-30-5/demo-react-frontend/src/components/Pages/Login/Login.js"],"names":["React","Component","Redirect","Button","Form","Container","Row","FormGroup","FormControl","FormLabel","urlAddress","url","ip","Login","props","state","id","username","password","account","event","console","log","requestOptions","method","headers","body","JSON","stringify","alert","fetch","then","response","status","json","data","window","sessionStorage","setItem","token","Cryptr","require","cryptr","encryptedString","encrypt","encryptedId","history","push","location","reload","catch","error","setState","target","value","handleClick","textDecoration"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Button, Form, Container, Row } from \"react-bootstrap\";\r\nimport { FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\r\nimport \"./Login.css\";\r\nimport urlAddress from \"../../ip.json\";\r\n\r\n\r\nconst url = \"http://\" + urlAddress.ip + \":8080/api/\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      id:\"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      account: \"\",\r\n    };\r\n  }\r\n\r\n  handleClick(event) {\r\n    console.log(this.state);\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Accept': \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        id:this.state.id,\r\n        username: this.state.username,\r\n        password: this.state.password,\r\n      }),\r\n    };\r\n\r\n    if (this.state.account === \"\") {\r\n      alert(\"Please Select Account Type\");\r\n    } else if (this.state.account === \"customer\") {\r\n      fetch(url + \"users/login\", requestOptions)\r\n        .then((response) => {\r\n          if (response.status === 200) {\r\n            response.json().then((data) => {\r\n              //console.log(data.token);\r\n              window.sessionStorage.setItem(\"token\", data.token);\r\n              window.sessionStorage.setItem(\"loggedIn\", true);\r\n              window.sessionStorage.setItem(\"email\", this.state.username);\r\n\r\n              const Cryptr = require(\"cryptr\");\r\n              const cryptr = new Cryptr(\"keyword\");\r\n\r\n              const encryptedString = cryptr.encrypt(this.state.password);\r\n              window.sessionStorage.setItem(\"encrypted\", encryptedString);\r\n\r\n              const encryptedId = cryptr.encrypt(this.state.id);\r\n              window.sessionStorage.setItem(\"id\", encryptedId)\r\n\r\n              this.props.history.push(\"/UserAppo\");\r\n              window.location.reload(true);\r\n              //return <Redirect to='/UserAppo' />\r\n            });\r\n          } else {\r\n            alert(\"Invalid Username or Password\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error contacting server\");\r\n        });\r\n    } else if (this.state.account === \"business\") {\r\n      fetch(url + \"businessOwners/login\", requestOptions)\r\n        .then((response) => {\r\n          //console.log(response.status);\r\n          if (response.status === 200) {\r\n              response.json().then((data) => {\r\n              console.log(\"data: \"+data.token);\r\n              window.sessionStorage.setItem(\"token\", data.token);\r\n              window.sessionStorage.setItem(\"business\", true);\r\n              window.sessionStorage.setItem(\"email\", this.state.username);\r\n\r\n              const Cryptr = require(\"cryptr\");\r\n              const cryptr = new Cryptr(\"keyword\");\r\n\r\n              const encryptedString = cryptr.encrypt(this.state.password);\r\n              window.sessionStorage.setItem(\"encrypted\", encryptedString);\r\n              this.props.history.push(\"/BusinessServices\");\r\n              window.location.reload(true);\r\n            });\r\n          } else {\r\n            alert(\"Invalid Username or Password\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error contacting server\");\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <div>\r\n          <Form className=\"login-form\">\r\n            <h1>Login</h1>\r\n\r\n            <Form.Group controlId=\"formBasicEmail\" className=\"txtb\">\r\n              <Form.Control\r\n                type=\"email\"\r\n                placeholder=\"Enter email\"\r\n                onChange={(event) =>\r\n                  this.setState({ username: event.target.value })\r\n                }\r\n              />\r\n              <Form.Text className=\"text-muted\"></Form.Text>\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formBasicPassword\" className=\"txtb\">\r\n              <Form.Control\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={(event) =>\r\n                  this.setState({ password: event.target.value })\r\n                }\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group>\r\n              <Row className=\"acc-type\">\r\n                <Form.Label>Account:</Form.Label>\r\n                <Form.Check\r\n                  className=\"acc-type\"\r\n                  type=\"radio\"\r\n                  label=\"Customer\"\r\n                  name=\"accountType\"\r\n                  value=\"customer\"\r\n                  onChange={(event) =>\r\n                    this.setState({ account: event.target.value })\r\n                  }\r\n                />\r\n                <Form.Check\r\n                  className=\"acc-type\"\r\n                  type=\"radio\"\r\n                  label=\"Business\"\r\n                  name=\"accountType\"\r\n                  value=\"business\"\r\n                  onChange={(event) =>\r\n                    this.setState({ account: event.target.value })\r\n                  }\r\n                />\r\n              </Row>\r\n            </Form.Group>\r\n\r\n            <Row>\r\n              <Button\r\n                variant=\"primary\"\r\n                onClick={(event) => this.handleClick(event)}\r\n                className=\"logbtn\"\r\n              >\r\n                Login\r\n              </Button>\r\n              <div class=\"bottom-text\">\r\n                Don't have account?\r\n                <a href=\"/register\" style={{ textDecoration: \"none\" }}>\r\n                  {\" \"}\r\n                  Sign up{\" \"}\r\n                </a>\r\n              </div>\r\n            </Row>\r\n          </Form>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}