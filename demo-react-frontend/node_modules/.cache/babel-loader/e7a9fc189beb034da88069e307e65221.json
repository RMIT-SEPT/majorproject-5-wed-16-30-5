{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./Services.css';import{Button}from\"react-bootstrap\";import*as IoIcons from'react-icons/io';import urlAddress from'../../ip.json';import Sidebar from'../../Layout/Sidebar/Sidebar.js';var url='http://'+urlAddress.ip+':8080/api/appointment/';console.log(urlAddress.ip);var UApt=/*#__PURE__*/function(_Component){_inherits(UApt,_Component);var _super=_createSuper(UApt);function UApt(props){var _this;_classCallCheck(this,UApt);_this=_super.call(this,props);_this.state={appointments:[]};_this.editAppointment=_this.editAppointment.bind(_assertThisInitialized(_this));return _this;}_createClass(UApt,[{key:\"editAppointment\",value:function editAppointment(id){this.props.history.push(\"/appointment/\".concat(id));}},{key:\"fetchData\",value:function fetchData(){var _this2=this;var email=window.sessionStorage.getItem('email');//encrypted password\nvar Cryptr=require('cryptr');var cryptr=new Cryptr('keyword');var encryptedString=window.sessionStorage.getItem('encrypted');var decryptedString=cryptr.decrypt(encryptedString);console.log(decryptedString);var encoded=window.btoa(email+':'+decryptedString);var auth='Basic '+encoded;var h=new Headers();h.append('Accept','application/json');h.append('Authorization',auth);h.append(\"Access-Control-Allow-Origin\",\"*\");fetch(url+'all',{method:'GET',headers:h}).then(function(res){return res.json();}).then(function(json){_this2.setState({appointments:json});});}},{key:\"delete\",value:function _delete(id){var _this3=this;var h=new Headers();var email=window.sessionStorage.getItem('email');var Cryptr=require('cryptr');var cryptr=new Cryptr('keyword');var encryptedString=window.sessionStorage.getItem('encrypted');var decryptedString=cryptr.decrypt(encryptedString);console.log(decryptedString);var encoded=window.btoa(email+':'+decryptedString);var auth='Basic '+encoded;h.append('Accept','application/json');h.append('Authorization',auth);if(window.confirm('Do you want to delete?')){fetch(url+id,{method:'delete',headers:h}).then(function(json){return _this3.fetchData();}).then(function(response){console.log('Authenticated');});}}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(\"div\",{style:{marginLeft:'25%'}},/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(IoIcons.IoIosPaper,null),\" Appointments\"),/*#__PURE__*/React.createElement(\"table\",{style:{width:'700px'}},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" Appointment\"),/*#__PURE__*/React.createElement(\"td\",null,\" Date\"),/*#__PURE__*/React.createElement(\"td\",null,\" Time\"),/*#__PURE__*/React.createElement(\"td\",null,\" With\"),/*#__PURE__*/React.createElement(\"td\",null,\" Service\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.appointments.map(function(a){return/*#__PURE__*/React.createElement(\"tr\",{className:\"appo\",key:a.appointmentIdentifier},/*#__PURE__*/React.createElement(\"td\",null,\" \",a.appointmentName),/*#__PURE__*/React.createElement(\"td\",null,\" \",a.appointmentDate),/*#__PURE__*/React.createElement(\"td\",null,\" \",a.appointmentTime),/*#__PURE__*/React.createElement(\"td\",null,\" \",a.workerName),/*#__PURE__*/React.createElement(\"td\",null,\" \",a.serviceName),/*#__PURE__*/React.createElement(\"td\",{className:\"edt\"},/*#__PURE__*/React.createElement(Button,{href:\"/appointment/\".concat(a.appointmentIdentifier),onClick:function onClick(){return _this4.editAppointment(a.appointmentIdentifier);},style:{marginRight:'10px'}},\"Edit\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:_this4.delete.bind(_this4,a.appointmentIdentifier)},\"Delete\")));})))));}}]);return UApt;}(Component);export default UApt;","map":{"version":3,"sources":["C:/Users/Amrah/IdeaProjects/Appointment booking API project/majorproject-5-wed-16-30-5/demo-react-frontend/src/components/Pages/User/UApt.js"],"names":["React","Component","Button","IoIcons","urlAddress","Sidebar","url","ip","console","log","UApt","props","state","appointments","editAppointment","bind","id","history","push","email","window","sessionStorage","getItem","Cryptr","require","cryptr","encryptedString","decryptedString","decrypt","encoded","btoa","auth","h","Headers","append","fetch","method","headers","then","res","json","setState","confirm","fetchData","response","marginLeft","width","map","a","appointmentIdentifier","appointmentName","appointmentDate","appointmentTime","workerName","serviceName","marginRight","delete"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport './Services.css';\r\nimport { Button } from \"react-bootstrap\";\r\nimport * as IoIcons from 'react-icons/io';\r\nimport urlAddress from '../../ip.json';\r\nimport Sidebar from '../../Layout/Sidebar/Sidebar.js';\r\n\r\nconst url = 'http://'+urlAddress.ip+':8080/api/appointment/';\r\nconsole.log(urlAddress.ip)\r\n\r\n\r\nclass UApt extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            appointments: [],\r\n        }\r\n        this.editAppointment = this.editAppointment.bind(this);\r\n    }\r\n    editAppointment(id) {\r\n        this.props.history.push(`/appointment/${id}`);\r\n    }\r\n    fetchData() {\r\n        let email = window.sessionStorage.getItem('email');\r\n        //encrypted password\r\n        const Cryptr = require('cryptr');\r\n        const cryptr = new Cryptr('keyword');\r\n        let encryptedString = window.sessionStorage.getItem('encrypted');\r\n        const decryptedString = cryptr.decrypt(encryptedString);\r\n        console.log(decryptedString);\r\n        let encoded = window.btoa(email + ':' + decryptedString);\r\n        let auth = 'Basic ' + encoded;\r\n        let h = new Headers();\r\n        h.append('Accept', 'application/json');\r\n        h.append('Authorization', auth);\r\n        h.append(\"Access-Control-Allow-Origin\", \"*\")\r\n\r\n        \r\n\r\n        fetch(url + 'all', {\r\n            method: 'GET',\r\n            headers: h\r\n        })\r\n            .then(res => res.json())\r\n            .then(json => {\r\n                this.setState({ appointments: json });\r\n\r\n            })\r\n    }\r\n    delete(id) {\r\n        let h = new Headers();\r\n        let email = window.sessionStorage.getItem('email');\r\n        const Cryptr = require('cryptr');\r\n        const cryptr = new Cryptr('keyword');\r\n        let encryptedString = window.sessionStorage.getItem('encrypted');\r\n        const decryptedString = cryptr.decrypt(encryptedString);\r\n        console.log(decryptedString);\r\n        let encoded = window.btoa(email + ':' + decryptedString);\r\n        let auth = 'Basic ' + encoded;\r\n        \r\n        h.append('Accept', 'application/json');\r\n        h.append('Authorization', auth);\r\n        if (window.confirm('Do you want to delete?')) {\r\n            fetch(url+id, {\r\n                method: 'delete',\r\n                headers: h\r\n            })\r\n            .then(json => this.fetchData())\r\n            .then(function (response) {\r\n            console.log('Authenticated')});\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n            <Sidebar/>\r\n            <div style={{ marginLeft: '25%' }}>\r\n                <h1><IoIcons.IoIosPaper /> Appointments</h1>\r\n                <table style={{ width: '700px' }} >\r\n                    <thead>\r\n                        <tr>\r\n                            <td> Appointment</td>\r\n                            <td> Date</td>\r\n                            <td> Time</td>\r\n                            <td> With</td>\r\n                            <td> Service</td>\r\n                            <td></td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.state.appointments.map(a =>\r\n                            <tr\r\n                                    \r\n                                className='appo'\r\n                                key={a.appointmentIdentifier} >\r\n                                \r\n                                <td> {a.appointmentName}</td>\r\n                                <td> {a.appointmentDate}</td>\r\n                                <td> {a.appointmentTime}</td>\r\n                                <td> {a.workerName}</td>\r\n                                <td> {a.serviceName}</td>\r\n                                <td className='edt'>\r\n                                    <Button\r\n                                        href={`/appointment/${a.appointmentIdentifier}`}\r\n                                        onClick={() => this.editAppointment(a.appointmentIdentifier)}\r\n                                        style={{ marginRight:'10px' }}>Edit</Button>\r\n                                    <Button variant=\"danger\" onClick={this.delete.bind(this, a.appointmentIdentifier)}>\r\n                                        Delete\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n\r\n            </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UApt"]},"metadata":{},"sourceType":"module"}