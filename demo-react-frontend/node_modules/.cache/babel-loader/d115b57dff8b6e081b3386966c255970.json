{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amrah\\\\IdeaProjects\\\\Appointment booking API project\\\\majorproject-5-wed-16-30-5\\\\demo-react-frontend\\\\src\\\\components\\\\Pages\\\\User\\\\CreateAppo.js\";\nimport React, { Component } from 'react';\nimport './Services.css';\nimport { Button } from \"react-bootstrap\";\nimport * as IoIcons from 'react-icons/io';\nimport Sidebar from '../../Layout/Sidebar/Sidebar';\nimport urlAddress from '../../ip.json';\nimport TimeField from 'react-simple-timefield';\nconst url = 'http://' + urlAddress.ip + ':8080/api/appointment';\nconst urlWorker = 'http://' + urlAddress.ip + ':8080/api/worker/allWorkers';\n\nclass CreateAppo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeNameHandler = event => {\n      this.setState({\n        appointmentName: event.target.value\n      });\n    };\n\n    this.changeDesHandler = event => {\n      this.setState({\n        description: event.target.value\n      });\n    };\n\n    this.changeDateHandler = event => {\n      this.setState({\n        appointmentDate: event.target.value\n      });\n    };\n\n    this.changeTimeHandler = event => {\n      this.setState({\n        appointmentTime: event.target.value\n      });\n    };\n\n    this.changeWorkerHandler = event => {\n      this.setState({\n        workerIdentifier: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n    };\n\n    this.state = {\n      appointmentIdentifier: Math.floor(10000 + Math.random() * 90000),\n      serviceIdentifier: this.props.match.params.id,\n      worker: [],\n      employee: [],\n      workerIdentifier: '',\n      appointmentName: '',\n      description: '',\n      appointmentDate: '',\n      appointmentTime: ''\n    };\n    this.changeNameHandler = this.changeNameHandler.bind(this);\n    this.changeDesHandler = this.changeDesHandler.bind(this);\n    this.changeTimeHandler = this.changeTimeHandler.bind(this);\n    this.changeWorkerHandler = this.changeWorkerHandler.bind(this);\n    this.changeDateHandler = this.changeDateHandler.bind(this);\n  }\n\n  SaveData() {\n    let h = new Headers();\n    let email = window.sessionStorage.getItem('email');\n\n    const Cryptr = require('cryptr');\n\n    const cryptr = new Cryptr('keyword');\n    let encryptedString = window.sessionStorage.getItem('encrypted');\n    const decryptedString = cryptr.decrypt(encryptedString);\n    console.log(decryptedString);\n    let encoded = window.btoa(email + ':' + decryptedString);\n    let auth = 'Basic ' + encoded;\n    h.append('Content-Type', 'application/json');\n    h.append('Accept', 'application/json');\n    h.append('Authorization', auth);\n    fetch(url, {\n      method: 'post',\n      headers: h,\n      body: JSON.stringify({\n        appointmentIdentifier: this.state.appointmentIdentifier,\n        serviceIdentifier: this.state.serviceIdentifier,\n        appointmentDate: this.state.appointmentDate,\n        appointmentName: this.state.appointmentName,\n        description: this.state.description,\n        appointmentTime: this.state.appointmentTime,\n        workerIdentifier: this.state.workerIdentifier\n      })\n    }).then(console.log(this.state));\n  }\n\n  fetchWorker() {\n    let h = new Headers();\n    h.append('Accept', 'application/json');\n    h.append(\"Access-Control-Allow-Origin\", \"*\");\n    fetch(urlWorker, {\n      method: 'GET',\n      headers: h\n    }).then(res => res.json()).then(json => {\n      this.setState({\n        worker: json\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchWorker();\n    console.log(this.state.appointmentIdentifier);\n    console.log(this.state.serviceIdentifier);\n  }\n\n  render() {\n    const employee = this.state.worker.filter(w => {\n      return w.serviceIdentifier.startsWith(this.state.serviceIdentifier);\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        marginLeft: '25%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IoIcons.IoIosPaper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 51\n      }\n    }), \" Book an Appointment: \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        marginLeft: '25%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 29\n      }\n    }, \" Appointment Id: \", this.state.appointmentIdentifier)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    }, \" Service Id: \", this.state.serviceIdentifier)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 29\n      }\n    }, \" Your Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Name\",\n      name: \"appointmentName\",\n      className: \"form-control\",\n      value: this.state.appointmentName,\n      onChange: this.changeNameHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }, \" Description: \"), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Description\",\n      name: \"Description\",\n      className: \"form-control\",\n      value: this.state.description,\n      onChange: this.changeDesHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      style: {\n        float: 'left',\n        marginRight: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, \" Date: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      placeholder: \"Date\",\n      name: \"Date\",\n      className: \"form-control\",\n      value: this.state.appointmentDate,\n      onChange: this.changeDateHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, \" Time: \"), /*#__PURE__*/React.createElement(TimeField, {\n      value: \"00:00:00\",\n      onChange: this.changeTimeHandler,\n      input: /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Date\",\n        name: \"Date\",\n        className: \"form-control\",\n        value: this.state.appointmentTime,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 33\n        }\n      }),\n      showSeconds: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        marginRight: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, \" Employee: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"employee id\",\n      name: \"employee\",\n      className: \"employee\",\n      onChange: this.changeWorkerHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 33\n      }\n    }, \"Choose an Employee\"), employee.map(e => /*#__PURE__*/React.createElement(\"option\", {\n      value: e.workerIdentifier,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 37\n      }\n    }, e.workerName)))), /*#__PURE__*/React.createElement(Button, {\n      className: \"btn btn-success\",\n      onClick: this.SaveData.bind(this),\n      href: \"/UserAppo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, \"Book Appointment\"))));\n  }\n\n}\n\nexport default CreateAppo;","map":{"version":3,"sources":["C:/Users/Amrah/IdeaProjects/Appointment booking API project/majorproject-5-wed-16-30-5/demo-react-frontend/src/components/Pages/User/CreateAppo.js"],"names":["React","Component","Button","IoIcons","Sidebar","urlAddress","TimeField","url","ip","urlWorker","CreateAppo","constructor","props","changeNameHandler","event","setState","appointmentName","target","value","changeDesHandler","description","changeDateHandler","appointmentDate","changeTimeHandler","appointmentTime","changeWorkerHandler","workerIdentifier","handleSubmit","preventDefault","state","appointmentIdentifier","Math","floor","random","serviceIdentifier","match","params","id","worker","employee","bind","SaveData","h","Headers","email","window","sessionStorage","getItem","Cryptr","require","cryptr","encryptedString","decryptedString","decrypt","console","log","encoded","btoa","auth","append","fetch","method","headers","body","JSON","stringify","then","fetchWorker","res","json","componentDidMount","render","filter","w","startsWith","marginLeft","float","marginRight","map","e","workerName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport './Services.css';\r\nimport { Button } from \"react-bootstrap\";\r\nimport * as IoIcons from 'react-icons/io';\r\nimport Sidebar from '../../Layout/Sidebar/Sidebar';\r\nimport urlAddress from '../../ip.json';\r\nimport TimeField from 'react-simple-timefield';\r\n\r\nconst url = 'http://'+urlAddress.ip+':8080/api/appointment';\r\nconst urlWorker = 'http://' + urlAddress.ip + ':8080/api/worker/allWorkers';\r\n\r\nclass CreateAppo extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            appointmentIdentifier: Math.floor(10000 + Math.random() * 90000),\r\n            serviceIdentifier: this.props.match.params.id,\r\n            worker: [],\r\n            employee: [],\r\n            workerIdentifier: '',\r\n            appointmentName: '',\r\n            description: '',\r\n            appointmentDate: '',\r\n            appointmentTime:''\r\n        }\r\n        this.changeNameHandler = this.changeNameHandler.bind(this);\r\n        this.changeDesHandler = this.changeDesHandler.bind(this);\r\n        this.changeTimeHandler = this.changeTimeHandler.bind(this);\r\n        this.changeWorkerHandler = this.changeWorkerHandler.bind(this);\r\n        this.changeDateHandler = this.changeDateHandler.bind(this);\r\n    }\r\n\r\n    changeNameHandler = (event) => {\r\n        this.setState({ appointmentName: event.target.value });\r\n    }\r\n    changeDesHandler = (event) => {\r\n        this.setState({ description: event.target.value });\r\n    }\r\n    changeDateHandler = (event) => {\r\n        this.setState({ appointmentDate: event.target.value });\r\n    }\r\n    changeTimeHandler = (event) => {\r\n        this.setState({ appointmentTime: event.target.value });\r\n    }\r\n    changeWorkerHandler = (event) => {\r\n        this.setState({ workerIdentifier: event.target.value });\r\n    }\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n    }\r\n    SaveData() {\r\n        let h = new Headers();\r\n        let email = window.sessionStorage.getItem('email');\r\n        const Cryptr = require('cryptr');\r\n        const cryptr = new Cryptr('keyword');\r\n        let encryptedString = window.sessionStorage.getItem('encrypted');\r\n        const decryptedString = cryptr.decrypt(encryptedString);\r\n        console.log(decryptedString);\r\n        let encoded = window.btoa(email + ':' + decryptedString);\r\n        let auth = 'Basic ' + encoded;\r\n        h.append('Content-Type', 'application/json');\r\n        h.append('Accept', 'application/json');\r\n        h.append('Authorization', auth);\r\n\r\n        fetch(url, {\r\n            method: 'post',\r\n            headers: h,\r\n            body: JSON.stringify({\r\n                appointmentIdentifier: this.state.appointmentIdentifier,\r\n                serviceIdentifier: this.state.serviceIdentifier,\r\n                appointmentDate: this.state.appointmentDate,\r\n                appointmentName: this.state.appointmentName,\r\n                description: this.state.description,\r\n                appointmentTime: this.state.appointmentTime,\r\n                workerIdentifier: this.state.workerIdentifier\r\n            })\r\n        }).then(console.log(this.state))\r\n    }\r\n    fetchWorker(){\r\n        let h = new Headers();\r\n        h.append('Accept', 'application/json');\r\n        h.append(\"Access-Control-Allow-Origin\", \"*\")\r\n\r\n        fetch(urlWorker, {\r\n            method: 'GET',\r\n            headers: h\r\n        })\r\n            .then(res => res.json())\r\n            .then(json => {\r\n                this.setState({ worker: json });\r\n            })\r\n    }\r\n    componentDidMount() {\r\n        this.fetchWorker();\r\n        console.log(this.state.appointmentIdentifier);\r\n        console.log(this.state.serviceIdentifier);\r\n    }\r\n\r\n    render() {\r\n        const employee = this.state.worker.filter(\r\n            w => {\r\n                return w.serviceIdentifier.startsWith(this.state.serviceIdentifier);\r\n            }\r\n        );\r\n        return (\r\n            <>\r\n                <Sidebar />\r\n                <h1 style={{ marginLeft: '25%' }}><IoIcons.IoIosPaper /> Book an Appointment: </h1>\r\n                <div className=\"container\" style={{ marginLeft: '25%' }}>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <label> Appointment Id: {this.state.appointmentIdentifier}</label>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label> Service Id: {this.state.serviceIdentifier}</label>\r\n                        </div>\r\n                        <div className=\"form-group\" >\r\n                            <label> Your Name: </label>\r\n                            <input type=\"text\" placeholder=\"Name\" name=\"appointmentName\" className=\"form-control\"\r\n                                value={this.state.appointmentName} onChange={this.changeNameHandler} />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label> Description: </label>\r\n                            <input placeholder=\"Description\" name=\"Description\" className=\"form-control\"\r\n                                value={this.state.description} onChange={this.changeDesHandler} />\r\n                        </div>\r\n                        <div className=\"form-group\" style={{ float: 'left', marginRight: '10px' }}>\r\n                            <label> Date: </label>\r\n                            <input type='date' placeholder=\"Date\" name=\"Date\" className=\"form-control\"\r\n                                value={this.state.appointmentDate} onChange={this.changeDateHandler} />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label> Time: </label>\r\n                            \r\n                            <TimeField\r\n                                value=\"00:00:00\"\r\n                                onChange={this.changeTimeHandler}\r\n                                input={\r\n                                <input \r\n                                type='text' \r\n                                placeholder=\"Date\" \r\n                                name=\"Date\" \r\n                                className=\"form-control\"\r\n                                value={this.state.appointmentTime}/>\r\n                                }\r\n                                showSeconds\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label style={{marginRight:'10px'}}> Employee: </label>    \r\n                            <select id=\"employee id\" name=\"employee\" className=\"employee\" onChange={this.changeWorkerHandler}>\r\n                                <option>Choose an Employee</option>\r\n                                {employee.map(e =>\r\n                                    <option value={e.workerIdentifier} >{e.workerName}</option>\r\n                                )}\r\n                            </select>\r\n                        </div>\r\n                        <Button\r\n                            className=\"btn btn-success\"\r\n                            onClick={this.SaveData.bind(this)}\r\n                            href='/UserAppo'\r\n                            >Book Appointment</Button>\r\n                    </form>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CreateAppo"]},"metadata":{},"sourceType":"module"}